# **GitHub Flow с Ветками**

Для эффективного управления разработкой проекта предлагается использовать **GitHub Flow** с определённой стратегией ветвления. Это позволит команде работать параллельно над различными задачами, обеспечит прозрачность процесса разработки и упростит интеграцию изменений в основную кодовую базу.

> [!IMPORTANT]
> Соблюдение этих практик поможет команде успешно реализовать проект и обеспечит лёгкую
> поддержку и развитие системы в будущем.

## **Стратегия Ветвления**

1. **Основная ветка (`main`)**

    **Назначение:** Хранит стабильный, готовый к релизу код.

> [!IMPORTANT]
> **Правила:**
>
> - Прямые коммиты в `main` запрещены.
> - Изменения попадают в `main` только через Pull Request (PR) после прохождения код-ревью и тестирования.
> - Краткое описание производится латинскими символами (кириллические символы не используются).

2. **Фиче-ветки (`feature/SS-<номер-задачи>-краткое-описание`)**

    **Назначение:** Разработка новой функциональности или исправление багов.

> [!IMPORTANT]
> **Правила:**
>
> - Создаются от `main`.
> - Именуются по шаблону: `feature/SS-<номер-задачи>-краткое-описание`.
> - После завершения работы создаётся PR для слияния обратно в `main`.
> - Краткое описание производится латинскими символами (кириллические символы не используются).

> [!TIP]
> **Пример:**
>
> - `feature/SS-1-create-report`
> - `feature/SS-3-auth`

Создавайте ветки с короткими именами, не пишите больше 2 слов. В описание PR нужно описывать то, что сделали в полном формате.

3. **Hotfix-ветки (`hotfix/SS-<номер-задачи>-краткое-описание`)**

    **Назначение:** Срочные исправления в продакшене.

> [!IMPORTANT]
> **Правила:**
>
> - Создаются от `main`.
> - После исправления проблема вливается обратно в `main`.
> - Именуются по шаблону: `hotfix/SS-<номер-задачи>-краткое-описание`.
> - Краткое описание производится латинскими символами (кириллические символы не используются).

> [!TIP]
> **Пример:**
>
> - `hotfix/SS-105-auth-error`

## **Процесс Работы**

### **1.Создание Фиче-ветки**

1. Обновите локальную ветку `main`.

```bash
   git checkout main
   git pull origin main
```

2. Создайте новую фиче-ветку.

```bash
   git checkout -b feature/SS-<номер-задачи>-краткое-описание
```

> [!TIP]
> **Пример:**
>
>```bash
>   git checkout -b feature/SS-1-report-method
>```

### 2. **Разработка в Фиче-ветки**

1. Пишите код, решающий поставленную задачу.

2. Коммитьте изменения с осмысленными сообщениями, включая идентификатор задачи.

```bash
   git add .
   git commit -m "[SS-1] Add create report"
```

### 3. **Публикация Фиче-ветки**

1. Отправьте ветку на удалённый репозиторий.

```bash
   git push origin feature/SS-1-create-report
```

### 4. **Создание Pull Request (PR)**

1. На GitHub создайте PR из вашей фиче-ветки в `main`.

2. В заголовке PR укажите идентификатор задачи.

> [!TIP]
> **Пример:**
>
> `[SS-1] Реализовано создание события`

3. В описании PR:
   - Опишите внесённые изменения.
   - Укажите ссылку на задачу (например, "Closes SS-1").
   - Добавьте любые дополнительные комментарии или вопросы.

### 5. **Код-ревью и Тестирование**

1. Другие разработчики проверяют ваш код, оставляют комментарии.
2. После одобрения и прохождения автоматических проверок PR готов к слиянию.

### 6. **Слияние PR**

1. Сливайте PR в `main` с помощью опции "Squash and Merge" для сохранения чистоты истории коммитов.
2. После слияния удалите фиче-ветку из удалённого репозитория.


## **Правила Именования и Коммитов**

### 1. **Именование веток:**

- **Фиче-ветки:** `feature/SS-<номер-задачи>-краткое-описание`
- **Hotfix-ветки:** `hotfix/SS-<номер-задачи>-краткое-описание`

### 2. **Сообщения коммитов:**

- Формат: `"[SS-<номер-задачи>] Краткое описание изменений"`

> [!TIP]
> **Пример:**
>
> - `[SS-2] Add user authorization`
> - `[SS-5] Fix event status update bug`

## **Пример Рабочего Процесса**

> [!TIP]
> **Пример:**
>
> Разработчик Ирина выполняет задачу SS-3: Реализация метода получения события

### 1. **Создаёт фиче-ветку:**

```bash
   git checkout main
   git checkout -b feature/SS-3-get-event
```

### 2. **Вносит изменения и коммитит:**

```bash
   git commit -m "[SS-3] Add GET /events/{id}"
```

### 3. **Публикует ветку и создаёт PR:**

```bash
   git push origin feature/SS-3-get-event
```

- **Заголовок PR:**
  
> [!TIP]
> **Пример:**
>
> `[SS-3] Реализован метод GET /events/{id}`

- **Описание PR:**

> [!TIP]
> **Пример:**
>
>```md
>   Реализован метод получения события по ID.
>   - Добавлена логика в контроллере.
>   - Написаны unit-тесты.
>   Closes SS-3.
>```

### 4. **Проходит код-ревью и слияние:**

- После одобрения Ирина сливает изменения в `main`.

## **Рекомендации по Код-ревью**

- **Минимум один рецензент:** Для каждого PR требуется проверка хотя бы одним участником команды.

> [!IMPORTANT]
> **Критерии проверки:**
>
> - Код соответствует стандартам кодирования.
> - Есть необходимые тесты.
> - Изменения решают поставленную задачу без побочных эффектов.
> - Документация обновлена при необходимости.

## **Работа с Hotfix**

> [!TIP]
> **Сценарий:**
>
> Если обнаружена критическая ошибка в продакшене.

### 1. **Создаётся hotfix-ветка от `main`:**

```bash
   git checkout main
   git pull origin main
   git checkout -b hotfix/SS-105-auth-fix
```

### 2. **Вносятся исправления и коммитятся:**

```bash
   git commit -m "[SS-105] Fix authorization error"
```

### 3. **Публикация ветки и создание PR в `main`:**

```bash
   git push origin hotfix/SS-105-auth-fix
```

## **Общие Правила и Рекомендации**

- **Частые коммиты:** Коммитьте небольшие, логически завершённые изменения.
- **Обновление веток:** Регулярно синхронизируйте вашу фиче-ветку с `main`, чтобы избежать конфликтов.
- **Автоматизация:** Настройте CI/CD для автоматического запуска тестов и проверок стиля кода при каждом PR.
- **Документация:** Обновляйте документацию API и внутренние комментарии по мере добавления новой функциональности.
- **Прозрачность:** Используйте систему трекинга задач (например, Jira или Trello) и всегда связывайте коммиты и PR с соответствующими задачами.

### **Использование Аббревиатур Задач**

- **Идентификатор задачи:** `[SS-<номер-задачи>]`
  - SS — сокращение от "Scheduler Service" (Сервис планирования встреч и звонков).
  - Используется в сообщениях коммитов, названиях веток и заголовках PR.

> [!IMPORTANT]
> **Пример:**
>
> - **Коммит:** `[SS-8] Add booking validation`
> - **Ветка:** `feature/SS-12-add-user-roles`
> - **PR:** `[SS-15] Интеграция с Kafka`

### **Сопоставление с Проектными Задачами**

- Каждая задача из проектного плана соответствует отдельной ветке и серии коммитов.

> [!IMPORTANT]
> **Почему это важно**
>
> Это облегчает отслеживание прогресса и управление изменениями.

## **Заключение**

Следуя описанной стратегии GitHub Flow с ветками, команда сможет эффективно сотрудничать, избегать конфликтов и поддерживать высокое качество кода. Ясная структура ветвления и согласованные правила именования облегчат навигацию по репозиторию и обеспечат прозрачность процесса разработки.

## Дополнительные Ресурсы

- [GitHub Flow](https://guides.github.com/introduction/flow/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Git Branching Strategies](https://nvie.com/posts/a-successful-git-branching-model/)
